### Kafka在spring中的应用

    kafak配置：zookeeper集群配置。防火墙和端口号配置
    
    kafka启
    
    

### 生产者概览

![Kafka生产者组件图](kafka生产者组件图.jpeg)


### 创建kafka生产者

    Kafka生产者的必选属性：
    1、bootstrap.servers : 该属性指定broker的地址清单，地址的格式为host:port。建议至少提供两个broker的信息。可以确保一个宕机，生产者仍然能够连接到集群上
    2、key.serializer : 生产者使用该属性指定的类把键对象序列化成数组。注意：key.serializer是必须设置的，即便不发送key
    3、value.serializer ：生产者使用该改属性指定的类把值序列化

### 生产者配置

    1、acks：该参数指定了必须要有多少个分区副本收到消息，生产者才会认为消息写入是成功的，该参数对消息丢失的可能性有重要影响。
    2、buffer.memory: 该参数用来设置生产者内存缓冲区的大小，生产者用它缓冲要发送到服务器的消息。
    3、compression.type:该参数可以设置为snappy、gzip或lz4，它指定了消息被发送给broker之前使用哪一种压缩算法进行压缩。默认不进行压缩
    4、retries：该参数的值决定了生产者可以重发消息的次数，如果达到这个次数，生产者会放弃重试并返回错误。
    5、batch.size：该参数指定了一个批次可以使用的内存大小，按照字节数计算
    6、linger.ms:该参数指定了生产者在发送批次之前等待更多消息加入批次的时间
    7、client.id：该参数可以是任意的字符串，服务器会用来识别消息的来源，还可以在日志和配合指标里


## KafkaConsumer概念

### 消费者和消费者群组

  Kafka消费者从属于消费者群组。一个消费者群组的消费者订阅的是同一个主题，每个消费者接受主题一部分分区的消息。向群组添加消费者是横向消费能力的主要方式。不要让消费者的数量超过主题分区的数量，多余的消费者只会被闲置。
      为每一个需要获取一个或多个主题全部消息的应用程序创建一个消费者群组，然后往群组里添加消费者来伸缩读取能力和处理能力，群组里的每个消费者只处理一部分消息。

### 消费者群组和分区再均衡
   分区的所有权从一个消费者转移到另一个消费者的行为被称为再均衡。
